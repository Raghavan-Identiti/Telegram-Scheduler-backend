(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{296:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>n});var a=l(5155),s=l(2115),r=l(3464),i=l(9509);function n(){let[e,t]=(0,s.useState)([]),[l,n]=(0,s.useState)([]),[d,o]=(0,s.useState)(""),[c,m]=(0,s.useState)(!1),[u,g]=(0,s.useState)(!1),[h,p]=(0,s.useState)([]);(0,s.useEffect)(()=>{let t=Math.max(e.length,l.length);p(e=>Array.from({length:t},(t,l)=>e[l]||{time:"",post:"".concat(l+1)}))},[e,l]);let x="production"===i.env.PRODUCTION?"https://telegram-scheduler-backend.onrender.com/api":"http://localhost:8000/api",f=async()=>{if(!e.length||!l.length)return void o("⚠️ Upload image and text files.");if(!h.every(e=>e.time&&e.post))return void o("⚠️ Fill all schedule times.");m(!0),o("");let t=new FormData;e.forEach(e=>t.append("files",e)),l.forEach(e=>t.append("files",e)),t.append("schedule_data",JSON.stringify(Object.fromEntries(h.map(e=>["post".concat(e.post,".jpg"),e.time]))));try{let e=await r.A.post("".concat(x,"/bulk-schedule"),t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});o(200===e.status?"✅ ".concat(e.data.status):"❌ Scheduling failed."),g(!0)}catch(e){console.error(e),o("❌ Upload failed.")}finally{m(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-[#F9FAFB] text-gray-800 flex items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"w-full max-w-5xl bg-white rounded-3xl shadow-2xl p-10 space-y-10",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-center text-indigo-600",children:"\uD83D\uDCEC Telegram Scheduler Dashboard"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-2 font-semibold text-sm",children:"\uD83D\uDCF8 Upload Images"}),(0,a.jsxs)("div",{onDrop:e=>{e.preventDefault(),t(Array.from(e.dataTransfer.files).filter(e=>e.type.startsWith("image/")))},onDragOver:e=>e.preventDefault(),className:"w-full border-2 border-dashed border-indigo-300 rounded-lg p-20 text-center bg-gray-50 hover:bg-indigo-50 cursor-pointer",onClick:()=>document.getElementById("imageInput").click(),children:[(0,a.jsx)("input",{id:"imageInput",type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:e=>t(Array.from(e.target.files||[]))}),(0,a.jsxs)("p",{className:"text-gray-500",children:["\uD83D\uDCE4 Drag & drop or click to upload ",(0,a.jsx)("strong",{children:"Images"})]})]}),(0,a.jsx)("div",{className:"mt-2 text-sm text-gray-600",children:e.length>0?"✅ ".concat(e.length," image file").concat(e.length>1?"s":""," uploaded"):"\uD83D\uDCC1 No image files uploaded yet"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-2 font-semibold text-sm",children:"\uD83D\uDCC4 Upload Text Files"}),(0,a.jsxs)("div",{onDrop:e=>{e.preventDefault(),n(Array.from(e.dataTransfer.files).filter(e=>e.name.endsWith(".txt")))},onDragOver:e=>e.preventDefault(),className:"w-full border-2 border-dashed border-indigo-300 rounded-lg p-20 text-center bg-gray-50 hover:bg-indigo-50 cursor-pointer",onClick:()=>document.getElementById("textInput").click(),children:[(0,a.jsx)("input",{id:"textInput",type:"file",accept:".txt",multiple:!0,className:"hidden",onChange:e=>n(Array.from(e.target.files||[]))}),(0,a.jsxs)("p",{className:"text-gray-500",children:["\uD83D\uDCE4 Drag & drop or click to upload ",(0,a.jsx)("strong",{children:".txt files"})]})]}),(0,a.jsx)("div",{className:"mt-2 text-sm text-gray-600",children:l.length>0?"✅ ".concat(l.length," text file").concat(l.length>1?"s":""," uploaded"):"\uD83D\uDCC1 No text files uploaded yet"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDD52 Schedule Times"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:h.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 items-center mb-3",children:[(0,a.jsx)("input",{type:"datetime-local",value:e.time||"",onChange:e=>((e,t)=>{let l=[...h];l[e].time=t,p(l)})(t,e.target.value),className:"border rounded px-2 py-1"}),t>0&&(0,a.jsx)("button",{type:"button",onClick:()=>(e=>{var t;let l=[...h];l[e].time=(null==(t=l[e-1])?void 0:t.time)||"",p(l)})(t),className:"text-sm text-indigo-500 underline hover:text-indigo-700",children:"Repeat ⟳"})]},t))})]}),(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("button",{onClick:f,disabled:c,className:"w-full md:w-auto px-8 py-3 rounded-lg font-semibold text-white text-sm transition ".concat(c?"bg-gray-400 cursor-not-allowed":"bg-indigo-500 hover:bg-indigo-600"),children:c?"Uploading...":"\uD83D\uDE80 Schedule Posts"}),d&&(0,a.jsx)("p",{className:"text-sm font-medium ".concat(d.includes("✅")?"text-emerald-600":"text-rose-600"),children:d}),u&&(0,a.jsx)("a",{href:"".concat(x,"/logs/messages.xlsx"),target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-2 text-indigo-500 hover:underline",children:"⬇️ Download Scheduled Log"})]})]})})}},4302:(e,t,l)=>{Promise.resolve().then(l.bind(l,296))}},e=>{e.O(0,[464,441,964,358],()=>e(e.s=4302)),_N_E=e.O()}]);